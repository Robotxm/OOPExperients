# 题目四：日期计算

## 题目原文

Write functions to add one day, one month, and one year to a `Date` as defined in §5.9[13].

Write a function that gives the day of the week for a given `Date`. 

Write a function that gives the `Date` of the first Monday following a given `Date`.

## 题目翻译

编写函数实现为 §5.9[13] 中定义的 `Date` 增加一天、一个月和一年。

编写函数获取给定 `Date` 是星期几。

编写函数获取给定 `Date` 所表示日期的下一个星期一。

## 题目解析

这道题我在实现的时候，将题目上的结构体当作了类使用，将所有要求实现为了其成员函数。

在构造 `Date` 的时候，如果没有指定参数，我的处理是使用当前系统的日期。如果指定了年、月和日则用给定的参数进行构造。这里对于错误数据的我选择的是修正，具体实现请参考代码。

下面依次讲解对年、月和日的操作。

对年的操作是这三个操作中最简单的一个，直接对相应字段增减即可。注意变化后要检查日期合法性并修正，比如 2020-2-29 加 1 年和减 1 年之后应该分别是 2019-2-28 和 2021-2-28。

对月的操作类似于数字加减法的进位和借位。首先直接把值加到当前 `Date` 的月字段里，然后循环判断，如果月大于 12 则减去 12，并给年字段加 1。如果是减去月份的话同理，将值从月字段里减去，然后循环判断如果月小于 1 则加上 12 然后给年字段减 1。

对日的操作和对月的操作类似，只是要同时注意年和月的进位借位问题。具体可以查看代码。

获取当前日期对应的星期几采用蔡勒法，在指导文档中附有链接，这里不详细说了。

获取距离当前日期最近的下一个星期一是基于获取到当前日期对应的星期几实现的。蔡勒法获取的星期日是 0，星期一到星期六是 1~6。我们首先利用当前 `Date` 对象构造一个新的 `Date`，然后根据星期几为其加上对应的天数即可。如果是星期日的话那只需要加 1 天，星期一到星期六的话分别加 7~2 天。这里不要写一堆 `if-else if` 或者 `switch`，具体可以看代码。

另外为了方便输出日期，程序重载了 `<<` 运算符。这样就能够直接 `cout << Date(2020, 5, 17)` 了。